CREATE TABLE STUDENTS
(
    ID INT NOT NULL IDENTITY (1,1) PRIMARY KEY,
    NAME VARCHAR(20) NOT NULL,
    SURNAME VARCHAR(20) NOT NULL
);

CREATE TABLE CLASSROOMS
(
    ID INT NOT NULL IDENTITY (1,1) PRIMARY KEY,
    GRADE VARCHAR (1) NOT NULL,
    LETTER VARCHAR(1) NOT NULL
);

CREATE TABLE STUDENT_CLASSROOMS
(
    ID INT NOT NULL IDENTITY (1,1) PRIMARY KEY,
    ID_STUDENT INT,
    ID_CLASSROOM INT,
    STATUS INT,
    SCHOOL_YEAR VARCHAR (4) NOT NULL,
    CREATE_DATE DATETIME,
    LAST_UPDATE DATETIME,
    END_DATE DATETIME
);

CREATE TABLE STUDENT_SUBJECTS
(
    ID INT NOT NULL IDENTITY (1,1) PRIMARY KEY,
    ID_STUDENT INT,
    ID_SUBJECT INT,
    STATUS VARCHAR,
    SCHOOL_YEAR VARCHAR (4) NOT NULL,
    CREATE_DATE DATETIME,
    LAST_UPDATE DATETIME,
    END_DATE DATETIME
);

CREATE TABLE SUBJECTS
(
    ID INT NOT NULL IDENTITY (1,1) PRIMARY KEY,
    DESCRIPTION VARCHAR (15) NOT NULL
);

CREATE TABLE QUALIFICATIONS
(
    ID INT NOT NULL IDENTITY (1,1) PRIMARY KEY,
    QUALIFICATION DOUBLE NOT NULL,
    ID_STUDENT INT,
    ID_SUBJECT INT,
    CREATE_DATE DATETIME,
    LAST_UPDATE DATETIME,
    END_DATE DATETIME
);

CREATE TABLE SUBJECTS_CLASSROOMS
(
    ID INT NOT NULL IDENTITY (1,1) PRIMARY KEY,
    ID_CLASSROOM INT,
    ID_SUBJECT INT
);


ALTER TABLE QUALIFICATIONS ADD FOREIGN KEY (ID_STUDENT) REFERENCES STUDENTS;

ALTER TABLE QUALIFICATIONS ADD FOREIGN KEY (ID_SUBJECT) REFERENCES SUBJECTS;

ALTER TABLE STUDENT_CLASSROOMS ADD FOREIGN KEY (ID_CLASSROOM) REFERENCES CLASSROOMS;

ALTER TABLE STUDENT_CLASSROOMS ADD FOREIGN KEY (ID_STUDENT) REFERENCES STUDENTS;

ALTER TABLE SUBJECTS_CLASSROOMS ADD FOREIGN KEY  (ID_CLASSROOM) REFERENCES CLASSROOMS;

ALTER TABLE SUBJECTS_CLASSROOMS ADD FOREIGN KEY  (ID_SUBJECT) REFERENCES SUBJECTS;

ALTER TABLE QUALIFICATIONS ADD FOREIGN KEY (ID_SUBJECT) REFERENCES SUBJECTS;

ALTER TABLE STUDENT_SUBJECTS ADD FOREIGN KEY (ID_STUDENT) REFERENCES  STUDENTS;

ALTER TABLE STUDENT_SUBJECTS ADD FOREIGN KEY (ID_SUBJECT) REFERENCES  SUBJECTS;












-- 1er endp id alumno con materias y las notas y promedio  FALTA UNITEST Y HANDLER
-- 2do end todos los alumnos y el prod gnral
-- borrado logico, 3er endpoint poder quitar una materia de un alumno, valid Y N
-- 4to endpoint quitar un alumno de un curso

-- hacer al calculo en la capa de datos del calculo del promedio gral de una materia.